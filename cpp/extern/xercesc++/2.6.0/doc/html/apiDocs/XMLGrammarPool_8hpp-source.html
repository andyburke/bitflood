<HTML><HEAD><SCRIPT language="JavaScript" src="../resources/script.js" type="text/javascript"></SCRIPT><TITLE>XMLGrammarPool.hpp Source File</TITLE><link href="XercesApi.css" rel="stylesheet" type="text/css"></HEAD><BODY alink="#ff0000" bgcolor="#ffffff" leftmargin="4" link="#0000ff" marginheight="4" marginwidth="4" text="#000000" topmargin="4" vlink="#0000aa"><TABLE border="0" cellpadding="0" cellspacing="0" width="620"><TR><TD align="left" height="60" rowspan="3" valign="top" width="135"><IMG border="0" height="60" hspace="0" src="../resources/logo.gif" vspace="0" width="135"></TD><TD align="left" colspan="4" height="5" valign="top" width="456"><IMG border="0" height="5" hspace="0" src="../resources/line.gif" vspace="0" width="456"></TD><TD align="left" height="60" rowspan="3" valign="top" width="29"><IMG border="0" height="60" hspace="0" src="../resources/right.gif" vspace="0" width="29"></TD></TR><TR><TD align="left" bgcolor="#0086b2" colspan="4" height="35" valign="top" width="456"><IMG alt="" border="0" height="35" hspace="0" src="../graphics/api-header.jpg" vspace="0" width="456"></TD></TR><TR><TD align="left" height="20" valign="top" width="168"><IMG border="0" height="20" hspace="0" src="../resources/bottom.gif" vspace="0" width="168"></TD><TD align="left" height="20" valign="top" width="96"><A href="http://xml.apache.org/" onMouseOut="rolloverOff('xml');" onMouseOver="rolloverOn('xml');" target="new"><IMG alt="http://xml.apache.org/" border="0" height="20" hspace="0" name="xml" onLoad="rolloverLoad('xml','../resources/button-xml-hi.gif','../resources/button-xml-lo.gif');" src="../resources/button-xml-lo.gif" vspace="0" width="96"></A></TD><TD align="left" height="20" valign="top" width="96"><A href="http://www.apache.org/" onMouseOut="rolloverOff('asf');" onMouseOver="rolloverOn('asf');" target="new"><IMG alt="http://www.apache.org/" border="0" height="20" hspace="0" name="asf" onLoad="rolloverLoad('asf','../resources/button-asf-hi.gif','../resources/button-asf-lo.gif');" src="../resources/button-asf-lo.gif" vspace="0" width="96"></A></TD><TD align="left" height="20" valign="top" width="96"><A href="http://www.w3.org/" onMouseOut="rolloverOff('w3c');" onMouseOver="rolloverOn('w3c');" target="new"><IMG alt="http://www.w3.org/" border="0" height="20" hspace="0" name="w3c" onLoad="rolloverLoad('w3c','../resources/button-w3c-hi.gif','../resources/button-w3c-lo.gif');" src="../resources/button-w3c-lo.gif" vspace="0" width="96"></A></TD></TR></TABLE><TABLE border="0" cellpadding="0" cellspacing="0" width="620"><TR><TD align="left" valign="top" width="120"><IMG border="0" height="14" hspace="0" src="../resources/join.gif" vspace="0" width="120"><BR>
  <A href="../../index.html" onMouseOut="rolloverOff('side-ext-2');" onMouseOver="rolloverOn('side-ext-2');"><IMG alt="Home" border="0" height="12" hspace="0" name="side-ext-2" onLoad="rolloverLoad('side-ext-2','../graphics/ext-2-label-2.jpg','../graphics/ext-2-label-3.jpg');" src="../graphics/ext-2-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>

  <A href="../index.html" onMouseOut="rolloverOff('side-index');" onMouseOver="rolloverOn('side-index');"><IMG alt="Readme" border="0" height="12" hspace="0" name="side-index" onLoad="rolloverLoad('side-index','../graphics/index-label-2.jpg','../graphics/index-label-3.jpg');" src="../graphics/index-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../releases.html" onMouseOut="rolloverOff('side-releases');" onMouseOver="rolloverOn('side-releases');"><IMG alt="Release Info" border="0" height="12" hspace="0" name="side-releases" onLoad="rolloverLoad('side-releases','../graphics/releases-label-2.jpg','../graphics/releases-label-3.jpg');" src="../graphics/releases-label-3.jpg" vspace="0" width="120"></A><BR>
  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>
  <A href="../install.html" onMouseOut="rolloverOff('side-install');" onMouseOver="rolloverOn('side-install');"><IMG alt="Installation" border="0" height="12" hspace="0" name="side-install" onLoad="rolloverLoad('side-install','../graphics/install-label-2.jpg','../graphics/install-label-3.jpg');" src="../graphics/install-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="http://xml.apache.org/dist/xerces-c/" onMouseOut="rolloverOff('side-ext-18');" onMouseOver="rolloverOn('side-ext-18');"><IMG alt="Download" border="0" height="12" hspace="0" name="side-ext-18" onLoad="rolloverLoad('side-ext-18','../graphics/ext-18-label-2.jpg','../graphics/ext-18-label-3.jpg');" src="../graphics/ext-18-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../build.html" onMouseOut="rolloverOff('side-build');" onMouseOver="rolloverOn('side-build');"><IMG alt="Build" border="0" height="12" hspace="0" name="side-build" onLoad="rolloverLoad('side-build','../graphics/build-label-2.jpg','../graphics/build-label-3.jpg');" src="../graphics/build-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>
  <A href="../faqs.html" onMouseOut="rolloverOff('side-faqs');" onMouseOver="rolloverOn('side-faqs');"><IMG alt="FAQs" border="0" height="12" hspace="0" name="side-faqs" onLoad="rolloverLoad('side-faqs','../graphics/faqs-label-2.jpg','../graphics/faqs-label-3.jpg');" src="../graphics/faqs-label-3.jpg" vspace="0" width="120"></A><BR>  
  <A href="../samples.html" onMouseOut="rolloverOff('side-samples');" onMouseOver="rolloverOn('side-samples');"><IMG alt="Samples" border="0" height="12" hspace="0" name="side-samples" onLoad="rolloverLoad('side-samples','../graphics/samples-label-2.jpg','../graphics/samples-label-3.jpg');" src="../graphics/samples-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../api.html" onMouseOut="rolloverOff('side-api');" onMouseOver="rolloverOn('side-api');"><IMG alt="API Docs" border="0" height="12" hspace="0" name="side-api" onLoad="rolloverLoad('side-api','../graphics/api-label-2.jpg','../graphics/api-label-3.jpg');" src="../graphics/api-label-3.jpg" vspace="0" width="120"></A><BR>  

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>  
  <A href="../ApacheDOMC++Binding.html" onMouseOut="rolloverOff('side-ext-68');" onMouseOver="rolloverOn('side-ext-68');"><IMG alt="DOM C++ Binding" border="0" height="12" hspace="0" name="side-ext-68" onLoad="rolloverLoad('side-ext-68','../graphics/ext-68-label-2.jpg','../graphics/ext-68-label-3.jpg');" src="../graphics/ext-68-label-3.jpg" vspace="0" width="120"></A><BR>

  <A href="../program.html" onMouseOut="rolloverOff('side-program');" onMouseOver="rolloverOn('side-program');"><IMG alt="Programming" border="0" height="12" hspace="0" name="side-program" onLoad="rolloverLoad('side-program','../graphics/program-label-2.jpg','../graphics/program-label-3.jpg');" src="../graphics/program-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../migrate.html" onMouseOut="rolloverOff('side-migrate');" onMouseOver="rolloverOn('side-migrate');"><IMG alt="Migration Guide" border="0" height="12" hspace="0" name="side-migrate" onLoad="rolloverLoad('side-migrate','../graphics/migrate-label-2.jpg','../graphics/migrate-label-3.jpg');" src="../graphics/migrate-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>

  <A href="../feedback.html" onMouseOut="rolloverOff('side-feedback');" onMouseOver="rolloverOn('side-feedback');"><IMG alt="Feedback" border="0" height="12" hspace="0" name="side-feedback" onLoad="rolloverLoad('side-feedback','../graphics/feedback-label-2.jpg','../graphics/feedback-label-3.jpg');" src="../graphics/feedback-label-3.jpg" vspace="0" width="120"></A><BR>
  <A href="../bug-report.html" onMouseOut="rolloverOff('side-bug-report');" onMouseOver="rolloverOn('side-bug-report');"><IMG alt="Bug-Reporting" border="0" height="12" hspace="0" name="side-bug-report" onLoad="rolloverLoad('side-bug-report','../graphics/bug-report-label-2.jpg','../graphics/bug-report-label-3.jpg');" src="../graphics/bug-report-label-3.jpg" vspace="0" width="120"></A><BR>  
  <A href="../pdf.html" onMouseOut="rolloverOff('side-pdf');" onMouseOver="rolloverOn('side-pdf');"><IMG alt="PDF Document" border="0" height="12" hspace="0" name="side-pdf" onLoad="rolloverLoad('side-pdf','../graphics/pdf-label-2.jpg','../graphics/pdf-label-3.jpg');" src="../graphics/pdf-label-3.jpg" vspace="0" width="120"></A><BR>

  <IMG border="0" height="6" hspace="0" src="../resources/separator.gif" vspace="0" width="120"><BR>

  <A href="http://xml.apache.org/websrc/cvsweb.cgi/xml-xerces/c/" onMouseOut="rolloverOff('side-ext-100');" onMouseOver="rolloverOn('side-ext-100');"><IMG alt="CVS Repository" border="0" height="12" hspace="0" name="side-ext-100" onLoad="rolloverLoad('side-ext-100','../graphics/ext-100-label-2.jpg','../graphics/ext-100-label-3.jpg');" src="../graphics/ext-100-label-3.jpg" vspace="0" width="120"></A><BR>

  <A href="http://marc.theaimsgroup.com/?l=xerces-c-dev" onMouseOut="rolloverOff('side-ext-102');" onMouseOver="rolloverOn('side-ext-102');"><IMG alt="Mail Archive" border="0" height="12" hspace="0" name="side-ext-102" onLoad="rolloverLoad('side-ext-102','../graphics/ext-102-label-2.jpg','../graphics/ext-102-label-3.jpg');" src="../graphics/ext-102-label-3.jpg" vspace="0" width="120"></A><BR>


<IMG border="0" height="14" hspace="0" src="../resources/close.gif" vspace="0" width="120"><BR></TD><TD align="left" valign="top" width="500"><TABLE border="0" cellpadding="3" cellspacing="0"><TR><TD>
    <TABLE border="0" cellpadding="0" cellspacing="0" width="494"><TR><TD bgcolor="#FFFFFF" colspan="2" width="494"><TABLE border="0" cellpadding="0" cellspacing="0" width="494"><TR><TD bgcolor="#039acc" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD><TD bgcolor="#039acc" height="1" width="492"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="492"></TD><TD bgcolor="#0086b2" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD></TR><TR><TD bgcolor="#039acc" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD><TD bgcolor="#0086b2" width="492"><FONT color="#ffffff" face="arial,helvetica,sanserif" size="+1"><IMG border="0" height="2" hspace="0" src="../resources/void.gif" vspace="0" width="2"><B>API Docs for SAX and DOM</B></FONT></TD><TD bgcolor="#017299" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD></TR><TR><TD bgcolor="#0086b2" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD><TD bgcolor="#017299" height="1" width="492"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="492"></TD><TD bgcolor="#017299" height="1" width="1"><IMG border="0" height="1" hspace="0" src="../resources/void.gif" vspace="0" width="1"></TD></TR></TABLE></TD></TR><TR><TD width="10">&nbsp;</TD><TD width="484"><FONT color="#000000" face="arial,helvetica,sanserif">

	    <P>
<!-- Generated by Doxygen 1.2.14 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>XMLGrammarPool.hpp</h1><a href="XMLGrammarPool_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> * Copyright 1999-2004 The Apache Software Foundation.</font>
00003 <font class="comment"> * </font>
00004 <font class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</font>
00005 <font class="comment"> * you may not use this file except in compliance with the License.</font>
00006 <font class="comment"> * You may obtain a copy of the License at</font>
00007 <font class="comment"> * </font>
00008 <font class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</font>
00009 <font class="comment"> * </font>
00010 <font class="comment"> * Unless required by applicable law or agreed to in writing, software</font>
00011 <font class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</font>
00012 <font class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</font>
00013 <font class="comment"> * See the License for the specific language governing permissions and</font>
00014 <font class="comment"> * limitations under the License.</font>
00015 <font class="comment"> */</font>
00016 
00017 <font class="comment">/*</font>
00018 <font class="comment"> * $Log: XMLGrammarPool.hpp,v $</font>
00019 <font class="comment"> * Revision 1.14  2004/09/29 19:27:07  cargilld</font>
00020 <font class="comment"> * Fix for Jira-1217: fixing problems with getXSModel.</font>
00021 <font class="comment"> *</font>
00022 <font class="comment"> * Revision 1.13  2004/09/08 13:55:59  peiyongz</font>
00023 <font class="comment"> * Apache License Version 2.0</font>
00024 <font class="comment"> *</font>
00025 <font class="comment"> * Revision 1.12  2004/04/07 14:09:22  peiyongz</font>
00026 <font class="comment"> * systemId (to replace rootElemName) as DTDGrammar Key</font>
00027 <font class="comment"> *</font>
00028 <font class="comment"> * Revision 1.11  2003/11/25 15:10:44  jberry</font>
00029 <font class="comment"> * Eliminate some compiler warnings concerning comments inside of comments</font>
00030 <font class="comment"> *</font>
00031 <font class="comment"> * Revision 1.10  2003/11/21 22:34:45  neilg</font>
00032 <font class="comment"> * More schema component model implementation, thanks to David Cargill.</font>
00033 <font class="comment"> * In particular, this cleans up and completes the XSModel, XSNamespaceItem,</font>
00034 <font class="comment"> * XSAttributeDeclaration and XSAttributeGroup implementations.</font>
00035 <font class="comment"> *</font>
00036 <font class="comment"> * Revision 1.9  2003/11/06 21:53:52  neilg</font>
00037 <font class="comment"> * update grammar pool interface so that cacheGrammar(Grammar) can tell the caller whether the grammar was accepted.  Also fix some documentation errors.</font>
00038 <font class="comment"> *</font>
00039 <font class="comment"> * Revision 1.8  2003/11/06 15:30:06  neilg</font>
00040 <font class="comment"> * first part of PSVI/schema component model implementation, thanks to David Cargill.  This covers setting the PSVIHandler on parser objects, as well as implementing XSNotation, XSSimpleTypeDefinition, XSIDCDefinition, and most of XSWildcard, XSComplexTypeDefinition, XSElementDeclaration, XSAttributeDeclaration and XSAttributeUse.</font>
00041 <font class="comment"> *</font>
00042 <font class="comment"> * Revision 1.7  2003/11/05 18:19:09  peiyongz</font>
00043 <font class="comment"> * Documentation update</font>
00044 <font class="comment"> *</font>
00045 <font class="comment"> * Revision 1.6  2003/10/29 16:16:48  peiyongz</font>
00046 <font class="comment"> * GrammarPool' serialization/deserialization support</font>
00047 <font class="comment"> *</font>
00048 <font class="comment"> * Revision 1.5  2003/10/10 18:36:03  neilg</font>
00049 <font class="comment"> * update XMLGrammarPool interface to make expected behaviour of locked pools better specified, and to add the capability to generate XSModels</font>
00050 <font class="comment"> *</font>
00051 <font class="comment"> * Revision 1.4  2003/09/16 18:30:54  neilg</font>
00052 <font class="comment"> * make Grammar pool be responsible for creating and owning URI string pools.  This is one more step towards having grammars be independent of the parsers involved in their creation</font>
00053 <font class="comment"> *</font>
00054 <font class="comment"> * Revision 1.3  2003/09/02 08:59:02  gareth</font>
00055 <font class="comment"> * Added API to get enumerator of grammars.</font>
00056 <font class="comment"> *</font>
00057 <font class="comment"> * Revision 1.2  2003/07/31 17:02:42  peiyongz</font>
00058 <font class="comment"> * Grammar embed GrammarDescription</font>
00059 <font class="comment"> *</font>
00060 <font class="comment"> * Revision 1.1  2003/06/20 18:37:39  peiyongz</font>
00061 <font class="comment"> * Stateless Grammar Pool :: Part I</font>
00062 <font class="comment"> *</font>
00063 <font class="comment"> * $Id: XMLGrammarPool.hpp,v 1.14 2004/09/29 19:27:07 cargilld Exp $</font>
00064 <font class="comment"> *</font>
00065 <font class="comment"> */</font>
00066 
00067 <font class="preprocessor">#if !defined(XMLGRAMMARPOOL_HPP)</font>
<a name="l00068"></a><a class="code" href="XMLGrammarPool_8hpp.html#a0">00068</a> <font class="preprocessor"></font><font class="preprocessor">#define XMLGRAMMARPOOL_HPP</font>
00069 <font class="preprocessor"></font>
00070 <font class="preprocessor">#include &lt;<a class="code" href="PlatformUtils_8hpp.html">xercesc/util/PlatformUtils.hpp</a>&gt;</font>
00071 <font class="preprocessor">#include &lt;xercesc/util/RefHashTableOf.hpp&gt;</font>
00072 <font class="preprocessor">#include &lt;<a class="code" href="XMemory_8hpp.html">xercesc/util/XMemory.hpp</a>&gt;</font>
00073 <font class="preprocessor">#include &lt;<a class="code" href="XSModel_8hpp.html">xercesc/framework/psvi/XSModel.hpp</a>&gt;</font>
00074 
00075 
00076 <a class="code" href="XercesDefs_8hpp.html#a2">XERCES_CPP_NAMESPACE_BEGIN</a>
00077 
<a name="l00078"></a><a class="code" href="XMLGrammarPool_8hpp.html#a1">00078</a> <font class="keyword">class </font><a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>;
00079 <font class="keyword">class </font><a class="code" href="classXMLGrammarDescription.html">XMLGrammarDescription</a>;
00080 <font class="keyword">class </font>DTDGrammar;
00081 <font class="keyword">class </font>SchemaGrammar;
00082 <font class="keyword">class </font><a class="code" href="classXMLDTDDescription.html">XMLDTDDescription</a>;
00083 <font class="keyword">class </font><a class="code" href="classXMLSchemaDescription.html">XMLSchemaDescription</a>;
00084 <font class="keyword">class </font><a class="code" href="XSNamedMap_8hpp.html#a1">XMLStringPool</a>;
00085 <font class="keyword">class </font><a class="code" href="classBinInputStream.html">BinInputStream</a>;
00086 <font class="keyword">class </font><a class="code" href="classBinOutputStream.html">BinOutputStream</a>;
00087 
<a name="l00088"></a><a class="code" href="classXMLGrammarPool.html">00088</a> <font class="keyword">class </font><a class="code" href="XercesDefs_8hpp.html#a9"></a> <a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a> : <font class="keyword">public</font> <a class="code" href="classXMemory.html">XMemory</a>
00089 {
00090 <font class="keyword">public</font> :
00091     <font class="comment">// -----------------------------------------------------------------------</font>
00093 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00095 <font class="comment"></font>
<a name="l00100"></a><a class="code" href="classXMLGrammarPool.html#z288_0">00100</a> <font class="comment"></font>    <font class="keyword">virtual</font> ~<a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a>(){};
00102 
00103     <font class="comment">// -----------------------------------------------------------------------</font>
00105 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00107 <font class="comment"></font>
00121 <font class="comment"></font>    <font class="keyword">virtual</font> <font class="keywordtype">bool</font>           cacheGrammar(<a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>* <font class="keyword">const</font>               gramToCache) = 0;
00122     
00130     <font class="keyword">virtual</font> <a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>*       retrieveGrammar(<a class="code" href="classXMLGrammarDescription.html">XMLGrammarDescription</a>* <font class="keyword">const</font> gramDesc) = 0;
00131     
00132         
00141     <font class="keyword">virtual</font> <a class="code" href="XMLGrammarPool_8hpp.html#a1">Grammar</a>*       orphanGrammar(<font class="keyword">const</font> XMLCh* <font class="keyword">const</font> nameSpaceKey) = 0;  
00142 
00143 
00149     <font class="keyword">virtual</font> RefHashTableOfEnumerator&lt;Grammar&gt; getGrammarEnumerator() <font class="keyword">const</font> = 0;
00150 
00157     <font class="keyword">virtual</font> <font class="keywordtype">bool</font>           clear() = 0;
00158         
00168     <font class="keyword">virtual</font> <font class="keywordtype">void</font>           lockPool() = 0;
00169     
00180     <font class="keyword">virtual</font> <font class="keywordtype">void</font>           unlockPool() = 0;
00181 
00183 
00184     <font class="comment">// -----------------------------------------------------------------------</font>
00186 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00188 <font class="comment"></font>
00193 <font class="comment"></font>    <font class="keyword">virtual</font> DTDGrammar*            createDTDGrammar() = 0;
00194 
00199     <font class="keyword">virtual</font> SchemaGrammar*         createSchemaGrammar() = 0;
00200                     
00205     <font class="keyword">virtual</font> <a class="code" href="classXMLDTDDescription.html">XMLDTDDescription</a>*     createDTDDescription(<font class="keyword">const</font> XMLCh* <font class="keyword">const</font> systemId) = 0;
00210     <font class="keyword">virtual</font> <a class="code" href="classXMLSchemaDescription.html">XMLSchemaDescription</a>*  createSchemaDescription(<font class="keyword">const</font> XMLCh* <font class="keyword">const</font> targetNamespace) = 0;
00211 
00213 
00214     <font class="comment">// -----------------------------------------------------------------------</font>
00216 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------                                                        </font>
00218 <font class="comment"></font>
00219     <font class="comment">/***</font>
00220 <font class="comment">      * Return an XSModel derived from the components of all SchemaGrammars</font>
00221 <font class="comment">      * in the grammar pool.  If the pool is locked, this should</font>
00222 <font class="comment">      * be a thread-safe operation.  It should return null if and only if</font>
00223 <font class="comment">      * the pool is empty.</font>
00224 <font class="comment">      *</font>
00225 <font class="comment">      * Calling getXSModel() on an unlocked grammar pool may result in the</font>
00226 <font class="comment">      * creation of a new XSModel with the old XSModel being deleted.  The</font>
00227 <font class="comment">      * function will return a different address for the XSModel if it has</font>
00228 <font class="comment">      * changed.</font>
00229 <font class="comment">      * </font>
00230 <font class="comment">      * @deprecated (shouldn't use address to determine if XSModel changed)</font>
00231 <font class="comment">      */</font>
00232     <font class="keyword">virtual</font> <a class="code" href="classXSModel.html">XSModel</a> *getXSModel() = 0;
00233 
00234     <font class="comment">/***</font>
00235 <font class="comment">      * Return an XSModel derived from the components of all SchemaGrammars</font>
00236 <font class="comment">      * in the grammar pool.  If the pool is locked, this should</font>
00237 <font class="comment">      * be a thread-safe operation.</font>
00238 <font class="comment">      *</font>
00239 <font class="comment">      * NOTE: The function should NEVER return NULL.  If there are no grammars in</font>
00240 <font class="comment">      *       the pool it should return an XSModel containing the Schema for Schema.      </font>
00241 <font class="comment">      *</font>
00242 <font class="comment">      * Calling getXSModel() on an unlocked grammar pool may result in the</font>
00243 <font class="comment">      * creation of a new XSModel with the old XSModel being deleted.</font>
00244 <font class="comment">      * The bool parameter will indicate if the XSModel was changed.</font>
00245 <font class="comment">      *     </font>
00246 <font class="comment">      * For source code compatibility, default implementation is to say</font>
00247 <font class="comment">      * XSModelWasChanged.</font>
00248 <font class="comment">      */</font>
<a name="l00249"></a><a class="code" href="classXMLGrammarPool.html#z291_1">00249</a>     <font class="keyword">virtual</font> <a class="code" href="classXSModel.html">XSModel</a> *getXSModel(<font class="keywordtype">bool</font>&amp; XSModelWasChanged)
00250     {
00251         XSModelWasChanged = <font class="keyword">true</font>;
00252         <font class="keywordflow">return</font> getXSModel();
00253     }
00254     
00255     <font class="comment">// @}</font>
00256 
00257     <font class="comment">// -----------------------------------------------------------------------</font>
00259 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------                                                        </font>
00261 <font class="comment"></font>
<a name="l00266"></a><a class="code" href="classXMLGrammarPool.html#z292_0">00266</a> <font class="comment"></font>    <font class="keyword">inline</font> <a class="code" href="classMemoryManager.html">MemoryManager</a>* <font class="keyword">const</font>    getMemoryManager()
00267     {
00268         <font class="keywordflow">return</font> fMemMgr;
00269     }
00270 
00277     <font class="keyword">virtual</font> <a class="code" href="XSNamedMap_8hpp.html#a1">XMLStringPool</a> *getURIStringPool() = 0;
00279 
00280     <font class="comment">// -----------------------------------------------------------------------</font>
00282 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------                                                        </font>
00283 
00284     <font class="comment">/***</font>
00285 <font class="comment">      *</font>
00286 <font class="comment">      * 1. Context: Serialize/Deserialize All Grammars In One Session</font>
00287 <font class="comment">      *</font>
00288 <font class="comment">      *    Since it is common that a declaration in one grammar may reference </font>
00289 <font class="comment">      *    to definitions in other grammars, it is required to serialize those </font>
00290 <font class="comment">      *    related (or interdependent) grammars in to one persistent data store </font>
00291 <font class="comment">      *    in one serialization session (storing), and deserialize them from the</font>
00292 <font class="comment">      *    persistent data store in one deserialization session (loading) back</font>
00293 <font class="comment">      *    to the grammar pool.    </font>
00294 <font class="comment">      *</font>
00295 <font class="comment">      * 2. Multiple serializations</font>
00296 <font class="comment">      *</font>
00297 <font class="comment">      *    It is acceptable that client application requests more than one </font>
00298 <font class="comment">      *    grammar serialization on a particular grammar pool, to track the </font>
00299 <font class="comment">      *    different grammars cached, or for whatever reasons that client </font>
00300 <font class="comment">      *    application is interested in. </font>
00301 <font class="comment">      *</font>
00302 <font class="comment">      * 3. Multiple deserializations</font>
00303 <font class="comment">      * </font>
00304 <font class="comment">      *    Request for grammar deserialization either after the grammar pool has </font>
00305 <font class="comment">      *    its own cached grammars, or request for more than one grammar </font>
00306 <font class="comment">      *    deserialization, may cause undesired and unpredictable consequence</font>
00307 <font class="comment">      *    and therefore client application shall be aware that individual </font>
00308 <font class="comment">      *    implementationis may NOT support this.</font>
00309 <font class="comment">      *</font>
00310 <font class="comment">      *    However it is strongly recommended that the client application requests </font>
00311 <font class="comment">      *    no more than one grammar deserialization even a particular implementation</font>
00312 <font class="comment">      *    may allow multiple deserializations.</font>
00313 <font class="comment">      *</font>
00314 <font class="comment">      * 4. Locking</font>
00315 <font class="comment">      *</font>
00316 <font class="comment">      *    Both serialization and deserialization requires to lock the grammar pool</font>
00317 <font class="comment">      *    before operation and unlock after operation. In the case the grammar pool</font>
00318 <font class="comment">      *    is locked by a third party, the request for serialization/deserialization</font>
00319 <font class="comment">      *    will NOT be entertained.</font>
00320 <font class="comment">      *</font>
00321 <font class="comment">      * 5. Versioning</font>
00322 <font class="comment">      *</font>
00323 <font class="comment">      *    The Persistent data store has a version tag to be verified during </font>
00324 <font class="comment">      *    deserialization, thus a grammar pool may decide if it supports</font>
00325 <font class="comment">      *    a binary data created by a different release of Xerces.</font>
00326 <font class="comment">      * </font>
00327 <font class="comment">      * 6. Clean up</font>
00328 <font class="comment">      *</font>
00329 <font class="comment">      *    The client application shall be aware that in the event of an exception</font>
00330 <font class="comment">      *    thrown due to a corrupted data store during deserialization, implementation</font>
00331 <font class="comment">      *    may not be able to clean up all resources allocated, and therefore it is </font>
00332 <font class="comment">      *    client application's responsibility to clean up those unreleased resources.</font>
00333 <font class="comment">      *</font>
00334 <font class="comment">      *</font>
00335 <font class="comment">      */</font>
00336     <font class="keyword">virtual</font> <font class="keywordtype">void</font>     serializeGrammars(<a class="code" href="classBinOutputStream.html">BinOutputStream</a>* <font class="keyword">const</font>)  = 0; 
00337     <font class="keyword">virtual</font> <font class="keywordtype">void</font>     deserializeGrammars(<a class="code" href="classBinInputStream.html">BinInputStream</a>* <font class="keyword">const</font>) = 0;       
00338        
00339 <font class="keyword">protected</font> :
00340     <font class="comment">// -----------------------------------------------------------------------</font>
00342 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
<a name="l00344"></a><a class="code" href="classXMLGrammarPool.html#z293_0">00344</a> <font class="comment">    XMLGrammarPool(MemoryManager* const memMgr = XMLPlatformUtils::fgMemoryManager)</font>
00345     :fMemMgr(memMgr)
00346     {
00347     };
00349 
00350 <font class="keyword">private</font> :
00351     <font class="comment">// -----------------------------------------------------------------------</font>
00353 <font class="comment"></font>    <font class="comment">// -----------------------------------------------------------------------</font>
00355 <font class="comment">    XMLGrammarPool(const XMLGrammarPool&amp; );</font>
00356     <a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a>&amp; operator=(<font class="keyword">const</font> <a class="code" href="classXMLGrammarPool.html">XMLGrammarPool</a>&amp; );
00358 
00359     <font class="comment">// -----------------------------------------------------------------------</font>
00360     <font class="comment">//</font>
00361     <font class="comment">// fMemMgr: plugged-in (or defaulted-in) memory manager</font>
00362     <font class="comment">//          not owned </font>
00363     <font class="comment">//          no reset after initialization</font>
00364     <font class="comment">//</font>
00365     <font class="comment">// -----------------------------------------------------------------------</font>
00366     
00367     <a class="code" href="classMemoryManager.html">MemoryManager</a>* <font class="keyword">const</font>  fMemMgr;
00368 
00369 };
00370 
00371 <a class="code" href="XercesDefs_8hpp.html#a3">XERCES_CPP_NAMESPACE_END</a>
00372 
00373 <font class="preprocessor">#endif</font>
</pre></div>    </FONT></TD></TR></TABLE><BR>
</TD></TR></TABLE></TD></TR></TABLE><BR><TABLE border="0" cellpadding="0" cellspacing="0" width="620"><TR><TD bgcolor="#0086b2"><IMG height="1" src="images/dot.gif" width="1" alt=""></TD></TR><TR><TD align="center"><FONT color="#0086b2" size="-1"><I>
              Copyright &copy; 1994-2004 The Apache Software Foundation.
              All Rights Reserved.
            </I></FONT></TD></TR></TABLE></BODY></HTML>
